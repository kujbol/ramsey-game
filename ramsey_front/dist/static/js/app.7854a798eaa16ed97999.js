webpackJsonp([1],{"2+LV":function(e,t){},"7zck":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i=a("/ocq"),r=a("Gu7T"),s=a.n(r),o=a("W3Iv"),l=a.n(o),c=a("BO1k"),u=a.n(c),d=a("d7EF"),v=a.n(d),m=a("fZjL"),p=a.n(m),f=a("mvHQ"),g=a.n(f),h=a("vwbq"),_=a("3wEs").a,y={0:_[5]},b=n.a.extend({name:"Game",data:function(){return{ws:null,graphData:{nodes:[],links:[]},dialog:!0,alerts:[]}},methods:{renderGraph:function(){var e=this.ws;h.h("#svg-graph > *").remove();var t=h.g("#svg-graph"),a=+t.attr("width"),n=+t.attr("height"),i=h.f().nodes(this.graphData.nodes),r=h.d(this.graphData.links).id(function(e){return e.id}),s=h.e().strength(-12e3).distanceMax(1500).distanceMin(400),o=h.c(a/2,n/2);i.force("charge_force",s).force("center_force",o).force("links",r),i.on("tick",function(){u.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}),c.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y})});var l=t.append("g").attr("class","everything"),c=l.append("g").attr("class","links").selectAll("line").data(this.graphData.links).enter().append("line").attr("stroke-width",8).attr("stroke-opacity",.6).on("mousedown",function(t){var a={type:"MSG_MOVE",start_node:t.source.index,end_node:t.target.index};e.send(g()(a))}).style("stroke",function(e){return function(e){var t=y[e];void 0===t&&(t=_[p()(y).length+1],y[e]=t);return t}(e.player)}),u=l.append("g").attr("class","nodes").selectAll("circle").data(this.graphData.nodes).enter().append("circle").attr("r",10).attr("fill",function(e){return"cadetblue"});h.a().on("start",function(e){h.b.active||i.alphaTarget(.3).restart();e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=h.b.x,e.fy=h.b.y}).on("end",function(e){h.b.active||i.alphaTarget(0);e.fx=null,e.fy=null})(u),h.i().on("zoom",function(){l.attr("transform",h.b.transform)})(t)},webSocketConnection:function(){var e=this,t=0;this.ws=new WebSocket(O+"game/"+this.$route.params.roomId),this.ws.addEventListener("open",function(e){this.send(g()({type:"MSG_CONNECT"}))}),this.ws.addEventListener("message",function(a){var n=JSON.parse(a.data);if(console.log(n),"MSG_GAME"===n.type){e.$data.dialog=!1;var i=n.body.available_graph,r=!0,o=!1,c=void 0;try{for(var d,m=u()(i.links);!(r=(d=m.next()).done);r=!0){d.value.player=0}}catch(e){o=!0,c=e}finally{try{!r&&m.return&&m.return()}finally{if(o)throw c}}var p=!0,f=!1,g=void 0;try{for(var h,_=u()(l()(n.body.players_graph));!(p=(h=_.next()).done);p=!0){for(var y,b=h.value,x=v()(b,2),w=x[0],k=x[1],S=0;S<k.links.length;S++)k.links[S].player=w;(y=i.links).push.apply(y,s()(k.links))}}catch(e){f=!0,g=e}finally{try{!p&&_.return&&_.return()}finally{if(f)throw g}}e.graphData=i,e.renderGraph()}if("MSG_MOVE"===n.type){var z=n.body.start_node,G=n.body.end_node,q=n.player,C=e.graphData.links.filter(function(e){return e.source.id==z&&e.target.id==G||e.target.id==z&&e.source.id==G});console.log(C),C[0].player=q}"MSG_INFO"===n.type&&(t+=1,e.$data.alerts.push({type:"info",details:n.body.details,id:t,open:!0})),"MSG_ERROR"===n.type&&(t+=1,e.$data.alerts.push({type:"error",details:n.body.details,id:t,open:!0})),"MSG_WON"===n.type&&(t+=1,e.$data.alerts.push({type:"success",details:n.body.details,id:t,open:!0}))})}},mounted:function(){this.webSocketConnection()},watch:{graphData:{handler:"renderGraph",deep:!0}}}),x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":"","fill-height":""}},[a("v-flex",{attrs:{"d-flex":""}},[a("v-container",{attrs:{id:"main-container"}},[e._l(e.alerts,function(t){return a("v-alert",{key:t.id,attrs:{color:t.type,icon:t.type,transition:"scale-transition",dismissible:""},model:{value:t.open,callback:function(a){e.$set(t,"open",a)},expression:"alert.open"}},[e._v("\n          "+e._s(t.details)+"\n        ")])}),e._v(" "),a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("svg",{attrs:{id:"svg-graph",width:"1500",height:"630"}},[a("g",{staticClass:"links"}),e._v(" "),a("g",{staticClass:"nodes"})])])],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"380"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Waiting for other players to join")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1)],1)],1)],2)],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(b,x,!1,function(e){a("2+LV")},"data-v-7a4c6bd8",null).exports,k=a("mtWM"),S=a.n(k),z={name:"NewGameDialog",props:["visible"],computed:{show:{get:function(){return this.visible},set:function(e){e||this.$emit("close")}}},data:function(){return{valid:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e.length<=10||"Name must be less than 10 characters"}],name:"",gameSize:"7",gameSizeRules:[function(e){return!!e||"Game size is required"},function(e){return/^\d+$/.test(e)||"Expected number"},function(e){return e<=100||"Game size must be less than 100"}],cliqueSize:"3",cliqueSizeRules:[function(e){return!!e||"Game size is required"},function(e){return/^\d+$/.test(e)||"Expected number"},function(e){return e<=100||"Game size must be less than 100"}],aiPlayer:!1}},methods:{submit:function(){var e={data:{game_name:this.name,graph_size:this.gameSize,clique_size:this.cliqueSize,is_ai:this.aiPlayer}};S.a.post(N+"games",e,{headers:{"Access-Control-Allow-Origin":"*"}}).then(this.$emit("submitted"))}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-container",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{label:"Game Size",rules:e.gameSizeRules,required:""},model:{value:e.gameSize,callback:function(t){e.gameSize=t},expression:"gameSize"}}),e._v(" "),a("v-text-field",{attrs:{label:"Winning clique Size",rules:e.cliqueSizeRules,required:""},model:{value:e.cliqueSize,callback:function(t){e.cliqueSize=t},expression:"cliqueSize"}}),e._v(" "),a("v-checkbox",{attrs:{label:"Is Ai player"},model:{value:e.aiPlayer,callback:function(t){e.aiPlayer=t},expression:"aiPlayer"}}),e._v(" "),a("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("\n        submit\n      ")]),e._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("close")])],1)],1)],1)},staticRenderFns:[]};var q=a("VU/8")(z,G,!1,function(e){a("t+4e")},"data-v-ea102d24",null).exports,C={name:"GameList",components:{"new-game-dialog":q},data:function(){return{newGameDialog:!1,games:[],headers:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"State",value:"state"},{text:"Graph size",value:"size"},{text:"Clique size",value:"finish_size"},{text:"Players",value:"player_count"},{text:"Join game",value:"join_game",sortable:!1}]}},mounted:function(){this.loadList()},methods:{loadList:function(){var e=this;S.a.get(N+"games",{headers:{"Access-Control-Allow-Origin":"*"}}).then(function(t){e.games=t.data.data.games,setTimeout(e.loadList,2e3)})},submitted:function(){var e=this;this.newGameDialog=!1,S.a.get(N+"games",{headers:{"Access-Control-Allow-Origin":"*"}}).then(function(t){e.games=t.data.data.games})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.games,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.id))]),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.state))]),e._v(" "),a("td",[e._v(e._s(t.item.size))]),e._v(" "),a("td",[e._v(e._s(t.item.finish_size))]),e._v(" "),a("td",[e._v(e._s(t.item.player_count))]),e._v(" "),a("td",[a("v-btn",{staticClass:"mx-0",attrs:{icon:"",to:{name:"game",params:{roomId:t.item.id}}}},[a("v-icon",{attrs:{color:"primary"}},[e._v("mouse")])],1)],1)]}}])}),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){t.stopPropagation(),e.newGameDialog=!0}}},[e._v("Create Game")]),e._v(" "),a("new-game-dialog",{attrs:{visible:e.newGameDialog},on:{close:function(t){e.newGameDialog=!1},submitted:function(t){e.submitted()}}})],1)},staticRenderFns:[]};var D=a("VU/8")(C,E,!1,function(e){a("oaaT")},"data-v-db97a068",null).exports;n.a.use(i.a);var R=new i.a({routes:[{path:"/game/:roomId",name:"game",component:w},{path:"/",name:"game_list",component:D}]}),A=a("3EgV"),F=a.n(A),M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire",dark:""}},[a("v-navigation-drawer",{attrs:{clipped:"",fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",[e._v("dashboard")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:{name:"game_list"}}},[e._v("Rooms")])],1)],1),e._v(" "),a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",[e._v("settings")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Settings")])],1)],1)],1)],1),e._v(" "),a("v-toolbar",{attrs:{app:"",fixed:"","clipped-left":""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v("Ramsey Game")])],1),e._v(" "),a("v-content",[a("router-view")],1)],1)},staticRenderFns:[]},$=a("VU/8")({data:function(){return{drawer:!1,fixed:!1,title:"Vuetify.js"}},name:"App"},M,!1,null,null,null).exports;a("7zck");a.d(t,"serverUrl",function(){return N}),a.d(t,"webSocketServerUrl",function(){return O});var N="http://ramsey-game.herokuapp.com/",O="ws://ramsey-game.herokuapp.com/";n.a.use(F.a,{theme:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}),n.a.config.productionTip=!1,new n.a({el:"#app",router:R,components:{App:$,NewGameDialog:q,GameList:D},template:"<App/>"})},oaaT:function(e,t){},"t+4e":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7854a798eaa16ed97999.js.map