webpackJsonp([1],{"7zck":function(e,t){},"9UK5":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i=a("/ocq"),r=a("Gu7T"),s=a.n(r),o=a("W3Iv"),l=a.n(o),c=a("BO1k"),u=a.n(c),d=a("d7EF"),v=a.n(d),m=a("mvHQ"),p=a.n(m),f=a("fZjL"),g=a.n(f),h=a("vwbq"),_=a("3wEs"),y=n.a.extend({data:function(){return{ws:null,graphData:{nodes:[],links:[]},dialog:!0,alerts:[]}},methods:{renderGraph:function(){var e=_.a,t=(h.g("svg"),h.f(this.graphData.nodes).force("charge",h.e().strength(-1e4)).force("center",h.c(750,325)).force("link",h.d().links(this.graphData.links)).on("tick",function(){t=h.g(".links").selectAll("line").data(a.links).on("click",function(e){var t={type:"MSG_MOVE",start_node:e.source.index,end_node:e.target.index};n.send(p()(t))}),t.enter().append("line").merge(t).attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}).attr("stroke-width",10).attr("stroke",function(t){return a=t.player,void 0===(n=i[a])&&(n=e[g()(i).length+1],i[a]=n),n;var a,n}),t.exit().remove(),function(){var e=h.g(".nodes").selectAll("text").data(a.nodes).call(h.a().on("start",r).on("drag",s).on("end",o));e.enter().append("text").text(function(e){return e.id}).merge(e).attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).attr("dy",function(e){return 10}),e.exit().remove()}();var t}));h.g(".links").selectAll("line").data(this.graphData.links);var a=this.graphData,n=this.ws,i={0:e[5]};function r(e){h.b.active||t.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}function s(e){e.fx=h.b.x,e.fy=h.b.y}function o(e){h.b.active||t.alphaTarget(0),e.fx=null,e.fy=null}},webSocketConnection:function(){var e=this,t=0;this.ws=new WebSocket(O+"game/"+this.$route.params.roomId);var a=this.ws;this.ws.addEventListener("open",function(e){a.send(p()({type:"MSG_CONNECT"}))}),this.ws.addEventListener("message",function(a){var n=JSON.parse(a.data);if(console.log(n),"MSG_GAME"===n.type){e.$data.dialog=!1;var i=n.body.available_graph,r=!0,o=!1,c=void 0;try{for(var d,m=u()(i.links);!(r=(d=m.next()).done);r=!0){d.value.player=0}}catch(e){o=!0,c=e}finally{try{!r&&m.return&&m.return()}finally{if(o)throw c}}var p=!0,f=!1,g=void 0;try{for(var h,_=u()(l()(n.body.players_graph));!(p=(h=_.next()).done);p=!0){for(var y,b=h.value,x=v()(b,2),w=x[0],k=x[1],S=0;S<k.links.length;S++)k.links[S].player=w;(y=i.links).push.apply(y,s()(k.links))}}catch(e){f=!0,g=e}finally{try{!p&&_.return&&_.return()}finally{if(f)throw g}}e.graphData=i}n.type,"MSG_INFO"===n.type&&(t+=1,e.$data.alerts.push({type:"info",details:n.body.details,id:t,open:!0})),"MSG_ERROR"===n.type&&(t+=1,e.$data.alerts.push({type:"error",details:n.body.details,id:t,open:!0})),"MSG_WON"===n.type&&(t+=1,e.$data.alerts.push({type:"success",details:n.body.details,id:t,open:!0}))})}},mounted:function(){this.webSocketConnection(),this.renderGraph()},watch:{graphData:{handler:"renderGraph",deep:!0}}}),b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":"","fill-height":""}},[a("v-flex",{attrs:{"d-flex":""}},[a("v-container",{attrs:{id:"main-container"}},[e._l(e.alerts,function(t){return a("v-alert",{key:t.id,attrs:{color:t.type,icon:t.type,transition:"scale-transition",dismissible:""},model:{value:t.open,callback:function(a){e.$set(t,"open",a)},expression:"alert.open"}},[e._v("\n          "+e._s(t.details)+"\n        ")])}),e._v(" "),a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("svg",{attrs:{width:"1500",height:"650"}},[a("g",{staticClass:"links"}),e._v(" "),a("g",{staticClass:"nodes"})])])],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"380"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Waiting for other players to join")]),e._v(" "),a("v-card-text",[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1)],1)],1)],2)],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(y,b,!1,function(e){a("9UK5")},"data-v-1d73f694",null).exports,w=a("mtWM"),k=a.n(w),S={name:"NewGameDialog",props:["visible"],computed:{show:{get:function(){return this.visible},set:function(e){e||this.$emit("close")}}},data:function(){return{valid:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e.length<=10||"Name must be less than 10 characters"}],name:"",gameSize:"7",gameSizeRules:[function(e){return!!e||"Game size is required"},function(e){return/^\d+$/.test(e)||"Expected number"},function(e){return e<=100||"Game size must be less than 100"}],cliqueSize:"3",cliqueSizeRules:[function(e){return!!e||"Game size is required"},function(e){return/^\d+$/.test(e)||"Expected number"},function(e){return e<=100||"Game size must be less than 100"}]}},methods:{submit:function(){var e={data:{game_name:this.name,graph_size:this.gameSize,clique_size:this.cliqueSize}};k.a.post($+"games",e,{headers:{"Access-Control-Allow-Origin":"*"}}).then(this.$emit("submitted"))}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-container",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{label:"Game Size",rules:e.gameSizeRules,required:""},model:{value:e.gameSize,callback:function(t){e.gameSize=t},expression:"gameSize"}}),e._v(" "),a("v-text-field",{attrs:{label:"Winning clique Size",rules:e.cliqueSizeRules,required:""},model:{value:e.cliqueSize,callback:function(t){e.cliqueSize=t},expression:"cliqueSize"}}),e._v(" "),a("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("\n        submit\n      ")]),e._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("close")])],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(S,z,!1,function(e){a("NV8G")},"data-v-c8dfed22",null).exports,q={name:"GameList",components:{"new-game-dialog":G},data:function(){return{newGameDialog:!1,games:[],headers:[{text:"Id",value:"id"},{text:"Name",value:"name"},{text:"State",value:"state"},{text:"Graph size",value:"size"},{text:"Clique size",value:"finish_size"},{text:"Players",value:"player_count"},{text:"Join game",value:"join_game",sortable:!1}]}},mounted:function(){this.loadList()},methods:{loadList:function(){var e=this;k.a.get($+"games",{headers:{"Access-Control-Allow-Origin":"*"}}).then(function(t){e.games=t.data.data.games,setTimeout(e.loadList,2e3)})},submitted:function(){var e=this;this.newGameDialog=!1,k.a.get($+"games",{headers:{"Access-Control-Allow-Origin":"*"}}).then(function(t){e.games=t.data.data.games})}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.games,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.id))]),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.state))]),e._v(" "),a("td",[e._v(e._s(t.item.size))]),e._v(" "),a("td",[e._v(e._s(t.item.finish_size))]),e._v(" "),a("td",[e._v(e._s(t.item.player_count))]),e._v(" "),a("td",[a("v-btn",{staticClass:"mx-0",attrs:{icon:"",to:{name:"game",params:{roomId:t.item.id}}}},[a("v-icon",{attrs:{color:"primary"}},[e._v("mouse")])],1)],1)]}}])}),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){t.stopPropagation(),e.newGameDialog=!0}}},[e._v("Create Game")]),e._v(" "),a("new-game-dialog",{attrs:{visible:e.newGameDialog},on:{close:function(t){e.newGameDialog=!1},submitted:function(t){e.submitted()}}})],1)},staticRenderFns:[]};var E=a("VU/8")(q,C,!1,function(e){a("oaaT")},"data-v-db97a068",null).exports;n.a.use(i.a);var N=new i.a({routes:[{path:"/game/:roomId",name:"game",component:x},{path:"/",name:"game_list",component:E}]}),R=a("3EgV"),A=a.n(R),D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire",dark:""}},[a("v-navigation-drawer",{attrs:{clipped:"",fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",[e._v("dashboard")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:{name:"game_list"}}},[e._v("Rooms")])],1)],1),e._v(" "),a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",[e._v("settings")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Settings")])],1)],1)],1)],1),e._v(" "),a("v-toolbar",{attrs:{app:"",fixed:"","clipped-left":""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v("Ramsey Game")])],1),e._v(" "),a("v-content",[a("router-view")],1),e._v(" "),a("v-footer",{attrs:{app:"",fixed:""}},[a("span",[e._v("Â© 2017")])])],1)},staticRenderFns:[]},F=a("VU/8")({data:function(){return{drawer:!1,fixed:!1,title:"Vuetify.js"}},name:"App"},D,!1,null,null,null).exports;a("7zck");a.d(t,"serverUrl",function(){return $}),a.d(t,"webSocketServerUrl",function(){return O});var $="http://ramsey-game.herokuapp.com/",O="ws://ramsey-game.herokuapp.com/";n.a.use(A.a,{theme:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}),n.a.config.productionTip=!1,new n.a({el:"#app",router:N,components:{App:F,NewGameDialog:G,GameList:E},template:"<App/>"})},NV8G:function(e,t){},oaaT:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e875299238decfa54b90.js.map